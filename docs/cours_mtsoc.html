<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Modelisation transactionelles des systemes sur puces | Cours collaboratif de l'ENSIMAG SLE 3A</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-green.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://lucasmahieu.github.io/SLEfeed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Cours de SLE 3A</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li class="active"><a href="">Accueil</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
			<li><a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:lucas.mahieu@icloud.com?subject=Cours de SLE, Jekyll Github pages f eedback&body=I have some feedback about the Modelisation transactionelles des systemes sur puces page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a><li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Modelisation transactionelles des systemes sur puces">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          












<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">Cours de SLE 2.0</li>
    
    
    
        
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="index.html">Get started</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Conception et exploration d'architectures, multi-coeurs, réseaux sur puces</a>
        <ul>
            
            
            
            <li><a href="cours_cea.html">Cours</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Conférences technologiques</a>
        <ul>
            
            
            
            <li><a href="cours_ct.html">Notes</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Modélisation transactionnelle des systèmes sur puces</a>
        <ul>
            
            
            
            <li class="active"><a href="cours_mtsoc.html">Cours</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Systèmes distribués</a>
        <ul>
            
            
            
            <li><a href="cours_sd.html">Cours</a></li>
            
            
            
            
            
            
            <li><a href="tp_sd.html">TP</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Sécurité des systèmes embarqués</a>
        <ul>
            
            
            
            <li><a href="cours_sse.html">Cours</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Validation des systèmes embarqués</a>
        <ul>
            
            
            
            <li><a href="cours_vsle.html">Cours</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Modelisation transactionelles des systemes sur puces</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h1,h2' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    

    

    

    

  <p>Lien du cours sur <a href="https://github.com/moy/cours-tlm">Github</a></p>

<h1 id="cours-10102016">Cours 10/10/2016</h1>

<p>Il faut créer/modéliser une hiérarchie des composants pour respecter le fonctionnement logique : video en même temps que audio et non séquenciel</p>

<h2 id="les-communications">Les Communications</h2>

<p>Pour les communications :
	- Un maitre : initie la com
	- Un esclave : répond à un requête <br />
Différent protocoles : 
	- Bloquants : initie un échange et ATTEND la réponse
	- Non bloquant : ne bloque pas l’initiateur + cannaux de com requête + réponse</p>

<h2 id="les-interuptions">Les interuptions</h2>

<p>Connections direct entre des composants par 1 fils<br />
* Permet de ne pas faire de polling
* Permet de faire des économie de l’énergie</p>

<p>Pas standardisé en TLM =&gt; on fait ce qu’on veut</p>

<p><strong>Question ?</strong><br />
Comment faire communiquer 2 procs ensemble ?<br />
Il faut une mémoire et faire du polling si les proc sont initiateur seulement.</p>

<h2 id="apport-du-tlm">Apport du TLM</h2>
<ul>
  <li>Développement du code embarqué en avance de phase</li>
  <li>Débuggage de l’intégration des composants</li>
  <li>Validation du RTL</li>
</ul>

<h2 id="c">C++</h2>

<p>Voir slide sur C++ du prof <a href="https://github.com/moy/cours-tlm/blob/master/02-c-plus-plus-handout.pdf">sur son Github</a></p>

<h1 id="cours-du-21102016">Cours du 21/10/2016</h1>

<h2 id="system-c">System C</h2>
<p>Voir slide d’exemple de code <a href="https://github.com/moy/cours-tlm/blob/master/03-systemc-handout.pdf">sur son Github</a></p>

<p><strong>Comment ça marche à l’intérieur ?</strong></p>

<p>System C à un scheduleur intern qui gère les processus : il a une “event list” et la liste des processus.<br />
3 états dans le scheduleur : <br />
- Running
- Sleeping
- Éligible</p>

<p>Pour sortir de running c’est forcement que le processus à “rendu la main” en faisant un sleep.<br />
Un proc qui est running ne peut que devenir Sleeping.</p>

<h2 id="revision-encore-de-c">Revision (encore) de C++</h2>
<p>Voir les slides <a href="PAS ENCORE LA">sur le github</a> du prof.</p>

<h1 id="cours-161216">Cours 16/12/16</h1>

<h2 id="emballage-natif">Emballage natif</h2>

<p>Attention au boucle infinie dans laquelle le processus ne rend pas la main.<br />
Dans ce cas, la simu ne s’arrêtera pas …<br />
Il faut faire appelle à cpu_relax pour rendre la main.</p>

<p>Inconvénients de l’emballage natif:</p>

<ul>
  <li>Pas de support de l’asm</li>
  <li>Pas de visibilité des autres transactions (accès pile, tas, intructions
(fetch)).</li>
  <li>Analyse de performances difficile</li>
</ul>

<h2 id="simulateur-de-jeu-dinstructions">Simulateur de jeu d’instructions</h2>

<p>exemple : ISS Instruction Set Simulator</p>

<p>Émule de jeu d’instruction</p>

<p>Plusieurs niveaux de précision : 
- Instruction accurate
- Cycle accurate
- Cycle callable</p>

<p>Mais l’émulation a le principale inconvénients que c’est lent</p>

<h2 id="autre-solution-">Autre solution :</h2>

<ul>
  <li>Just-in-Time (JIT) : Compiler le code, et découper le binaire en bloc de base
et jongler entre l’ISS et les blocs de bases recompiler</li>
  <li>Ou autre translations dynamique : QMU etc</li>
</ul>

<h2 id="si-il-y-a-un-os-">Si il y a un OS ?</h2>

<p>Avec ISS : ca marche mais trop lent</p>

<p>Solution native : <br />
On pourrait porter Linux sur une architecture “System C TLM”</p>

<h2 id="valuation-et-exploration-darchitecture">Évaluation et exploration d’architecture</h2>

<p>Comment est géré le temps en système C ?<br />
wait(temps) -&gt; change l’ordre des actions, vrai notion de temps</p>

<p>Rôle du temps en TLM ?</p>

<p>Plusieurs niveau de vue du temps :</p>

<ul>
  <li>TLM Loosely Time (LT): temps moue, le temps à pas de signification, gros grain.
(utilisé : programmation)</li>
  <li>Approximately Timed (AT) : Temps précis induits par la microarchi,
communication à la taille du bus. (utilisé pour l’évaluation d’archi et de
perf)</li>
</ul>

<p>Problématiques :</p>

<ul>
  <li>Exemple de lecture écriture en mémoire : <br />
En LT -&gt; |      READ      |     WRITE     |
En AT -&gt; |READ|WRITE|READ|WRITE|READ|WRITE|</li>
</ul>

<p>en LT, tout pourrait être fait dans le même temps !</p>

<ul>
  <li>Transducteur : C’est des convertisseurs qui permet de gérer le temps</li>
</ul>

<h1 id="bug-or-not-bug-">Bug or not Bug ?</h1>

<p>Il peut y avoir des bugs HW et SW:</p>

<ul>
  <li>HW : La simulation simule EXACTEMENT le HW qui avait un BUG, donc on peut corriger
le HW -&gt; cool</li>
  <li>HW : Erreur de programmation du simulateur</li>
  <li>SW : Bug de soft -&gt; on débug</li>
  <li>SW : Bug du soft à cause du HW -&gt; aie aie aie</li>
</ul>

<p>Si le soft marche sur le TLM -&gt; Il doit marcher sur le HW</p>

<p>Si SW marche PAS sur le HW -&gt; Il ne doit PAS marcher sur le TLM</p>

<p>Si le SW marche sur le TLM mais pas sur le HW … AIE AIE AIE</p>

<p>Donc un modèle TLM doit être fidèle ! Faire TOUT ce que le HW fait<br />
Il peut avoir plus de comportement que le HW mais ne doit pas devenir iréaliste</p>

<p>Du soft erroné peut être simulé de 2 façons :</p>

<ul>
  <li>ISS: Il y a un context switch toutes les instructions ou toutes les X
instructions, dans ce cas, on peut “camoufler” des erreurs en simulation,
alors que la vrai puces aurait plantée.</li>
  <li>en NATIF: Il faut faire des CPU_RELAX() pour que le temps passe et pour que
les autres processus puissent s’executer. Donc il peut également il avoir des
camouflage d’erreur.</li>
</ul>

<h1 id="optimisation-des-performances">Optimisation des performances</h1>

<h2 id="transaction-bloc">Transaction bloc</h2>

<p>Pour écrire des données à un composant sur le bus, on fait des socket.write(..)
Or, si on fait un truc basique, pour chaque mot à envoyé, il faut faire un
requete au bus, qui doit décoder l’adresse, etc etc …</p>

<p>On pourrait faire un socket.block_write(…) qui demande de faire un transfert
depuis une adresse d’une quantité X. Ceci permet de faire 1 seul décodage
d’adresse et donc de gagner pas mal de temps.</p>

<p>Cela rend donc l’écriture d’une zone mémoire atomique.</p>

<h2 id="timing-approxim">Timing approximé</h2>

<p>Context-switch est très cher</p>

<p>Donc on évite les wait.</p>

<p>Pour faire avancer le temps, on fait des wait(petit_temps), à chaque tour de
boucle.</p>

<p><strong>Solution : Quantum Keeping</strong> On utilise un compteur sur 64 bits qui s’incrémente à la place du
temps. Et de temps en temps on fait un wait de ce compteur qui à simuler le
temps, et on remet le compteur à zéro. Cela fait faire un context-switch 
bien moins souvent.</p>

<h2 id="paralllisation-de-systemc">Parallélisation de SystemC</h2>

<p>Les systèmes sur puces sont parallèles or SystemC n’a qu’un seul processus.
Mais SystemC a qu’une notion de processus.</p>

<p><strong>Solution naive:</strong> Chaque SC-THREAD créé des p_thread -&gt; bcp de p-thread donc
ne passe pas à l’échelle</p>

<p><strong>Solution un peu mieux:</strong> N processus = N processus SystemC</p>

<p><strong>Solution testé</strong> On pourrait analyser le code et créer des processus qui
exécute du code qui n’a pas de variables partagé. En théorie, bien. En pratique,
impossible car bcp trop de dépendance entre les processus.</p>

<h1 id="estimation-de-consommation-dnergie-et-de-temprature">Estimation de consommation d’énergie et de température</h1>

<p>Modélisation de la plateforme en une machine à état à 3 états :</p>

<ul>
  <li>Run : 3 Watt</li>
  <li>Idle : 1 Watt</li>
  <li>Wait : 0 Watt</li>
</ul>

<p>Donc on fait l’intégral sur le temps passé dans chaque état pour connaitre la
conso sur un temps donné</p>

<p>Pour la température, on fait la somme de tout ce qui ajoute de la chaleur et de
tout ce qui en enlève.</p>

<h1 id="exam">Exam</h1>

<ul>
  <li>Questions de cours C++, SystemC/TLM, intervenant extérieur.</li>
  <li>Question temps simulé / temps wall clock</li>
  <li>Composant pour améliorer le TP3 : améliorer le memset</li>
  <li>SC_MODULE, SC_THREAD, SC_METHOD, wait, notify, …</li>
  <li>hal.h</li>
  <li>Principe de TLM2</li>
  <li>Confusion SW et HW</li>
</ul>

<h1 id="rcape-tp">Récape TP</h1>

<h2 id="tp1">TP1</h2>

<p>Générateur -&gt; Bus -&gt; Memory</p>

<h2 id="tp2">TP2</h2>

<p>Module LCD en plus, et la ROM</p>

<h2 id="tp3">TP3</h2>

<ul>
  <li>Intégration du logiciel embarqué
    <ul>
      <li>ISS</li>
      <li>Native</li>
    </ul>
  </li>
  <li>hal.h -&gt; soft embarqué, doit être compilé avec le compilateur embarqué</li>
</ul>

<h1 id="intervenant-st">Intervenant ST:</h1>

<p>Jerome CORNET</p>

<h2 id="dernire-nouvelle-de-lindustrie-du-semi-conducteur">Dernière nouvelle de l’industrie du semi-conducteur</h2>

<h3 id="conduite-autonome">Conduite autonome</h3>

<p>Ce qui se passe naturellement, pour pouvoir traiter toutes les données 
c’est de passer d’un CPU à GPU, puis Neural PE, traitement d’image.</p>

<p>Mais il y a aussi bcp de contraintes vis à vis de la quantité de traitement de
données.</p>

<p>Sureté  = Ne pas engendrer de dégâts en cas de défaillance.</p>

<p>Sécurité = Être protégé de menace extérieur.</p>

<p>Ce qui induit des chips gros, avec bcp d’IP très complexes, des moyens de
communications nombreux et complexe, mémoire (importante).</p>

<h3 id="iot">IoT</h3>

<p>Beaucoup de cas d’utilisation possible : utilisateur privé, industrie, medical,
…</p>

<p>Ceci induit une très forte connectivité.</p>

<p>Ainsi que des problématiques de consommation</p>

<p>Induit l’augmentation du nombre de petits chip.</p>

<p>Des chips petits, sans mémoire, seulement quelques IP, …</p>

<p>ISO 26262 c’est la norme de safty pour l’automobile</p>

<h2 id="prototypage-virtuel">Prototypage virtuel</h2>

<p>Émulation = utilisation de logiciel qui existe déjà pour l’utiliser de la MEME
façon qu’avec le HW d’origine.</p>

<p>Virtualisation = exécuter du soft mais dans le but de concevoir du SW non
existant.</p>

<p>En virtualisation, on reproduit chaque petite tâche donc on peut trouver de
vrais bug liés au temporel et à l’ordre.</p>

<p>Sert à faire du développement de logiciel embarqué en avance de phase.</p>

<p>Vu que c’est en avance de phase, ça permet de trouver des contradictions, des
ambigüités du cahier des charges.</p>

<p>En post silicium, permet de comprendre ce qui se passe dans le chip.</p>

<p>Peut servir au client pour lui permettre de l’aider à développer le reste de son
système.</p>

<p>Exploitation d’architecture = permet de ne pas s’intéresser aux données mais au
débit et au transport de données.</p>

<h3 id="mtier-de-virtualisation--st">Métier de virtualisation à ST</h3>

<p>Faire des modèles</p>

<p>Faire des couches au dessus de TLM (comme ensitlm) pour faire des choses
réutilisable pour en faire des legos</p>

<h2 id="grandes-tendances">Grandes tendances</h2>

<p>Fonctionnalités nouvelles:</p>

<ul>
  <li>Simulation d’horloge : ex. Basse consommation</li>
  <li>Simulation de voltage</li>
  <li>Simulation des PIO Muxing (plusieurs fonctions sur un I/O)</li>
</ul>

<p>Injection d’erreurs :</p>

<ul>
  <li>Rien de plus simple, il suffis de changer quelques lignes dans le modèle.</li>
  <li>Simuler une intrusion dans le système. (changement dans la DDR)</li>
  <li>Tester des cas limites (cas des 16 collisions dans ethernet)</li>
</ul>

<p>Intégration multi-système:</p>

<ul>
  <li>Faire plusieurs modèles sur plusieurs simulateurs et les faire communiquer
ensemble.</li>
  <li>Ça serait un vrai plus pour exploiter les many-cores.</li>
  <li>Permet de faire des simu pour des clients avec des morceaux de chez ST, et des
morceaux chez les clients.</li>
</ul>

<p>Dans l’automobile :</p>

<ul>
  <li>Simuler les réseaux de nœuds d’une voiture qui comprend bcp de uC</li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>[]:</p>



    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 Lucas Mahieu. All rights reserved. <br />
 Site last generated: Feb 6, 2017 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>